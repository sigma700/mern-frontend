import{a as n,o as e,t as l,w as k,v as y}from"./chunk-NL6KNZEE-UgZfVOb5.js";function S(){const h=[{title:"Home",path:"/",icon:"house.svg"}],[s,i]=n.useState(!1),m=()=>i(!s);return e.jsxs("main",{className:"lg:hidden",children:[e.jsx("div",{className:"nav-bar float-right",children:e.jsx(l,{to:"#",className:"menu-bars",onClick:m,children:e.jsx("img",{className:"w-[30px]",src:"/menu.svg",alt:"Menu"})})}),e.jsx("nav",{className:`nav-menu ${s?"active":"inactive"}`,children:s&&e.jsxs("ul",{className:"bg-black p-[20px] rounded-[10px] absolute right-0 top-0 h-full transform ease-in-out transition-all duration-[0.3s]",children:[e.jsx("li",{className:"nav-bar-toggle",children:e.jsx(l,{onClick:m,to:"#",className:"menu-bars text-center",children:e.jsx("img",{src:"/x.svg",alt:"Close"})})}),h.map((x,o)=>e.jsxs("li",{className:"flex gap-[20px] items-center",children:[e.jsx("img",{className:"w-[20px]",src:x.icon,alt:""}),e.jsx("span",{children:x.title})]},o))]})})]})}function C(){const h=[{title:"Home",path:"/",icon:"house.svg"}];return e.jsx("main",{className:"hidden lg:block",children:e.jsx("div",{className:"float-right",children:e.jsx("ul",{children:h.map((s,i)=>e.jsx("li",{className:"flex",children:e.jsxs(l,{className:"flex gap-[20px]",to:s.path,children:[e.jsx("img",{src:s.icon,alt:""}),e.jsx("span",{children:s.title})]})},i))})})})}const D=k(function(){var v;const[s,i]=n.useState([]),[m,x]=n.useState([]),[o,j]=n.useState(""),[f,g]=n.useState(!1),[u,b]=n.useState(null);n.useEffect(()=>{(async()=>{g(!0),b(null);try{const a="https://schoolflex-backend-1.onrender.com/",c=o?`${a}/api/schools/search-exact?name=${encodeURIComponent(o)}`:`${a}/api/schools`,p=await fetch(c);if(console.log(p),!p.ok)throw new Error("Network response was not ok");const{data:t}=await p.json();console.log("data",t);let d=[];Array.isArray(t)?d=t:Array.isArray(t.data)?d=t.data:t&&typeof t=="object"&&(d=[t]),i(d),console.log(d)}catch(a){b(a.message),console.error("Fetch error:",a)}finally{g(!1)}})()},[o]);const N=r=>{r.preventDefault();const c=new FormData(r.currentTarget).get("search");j(c)},w=async r=>{try{if(!(await fetch(`${backendUrl}/api/collections`,{method:"POST",headers:{"Content-Type ":"application/json"},body:JSON.stringify({schoolId:r._id}),credentials:"include"})).ok)throw new Error("Failed to add to collection");x(c=>[...c,r]),alert(`${r.name} added to collections`)}catch{console.error("Error adding school to the collections"),alert("Failed to add to collection")}};return e.jsxs("main",{className:"bg-[#fbf4da] h-full text-black",children:[e.jsx("style",{children:`
                    main {
                            min-height: full;
                            width: 100vw;
                            background-image: url('/milad-fakurian-GJKx5lhwU3M-unsplash.jpg');
                            background-size: cover;
                            background-position: center;
                            background-repeat: no-repeat;
                            margin: 0;
                            padding: 0;
                    }
            `}),e.jsx("h1",{children:"Logo"}),e.jsx(S,{}),e.jsx(C,{}),e.jsxs("div",{className:"mt-[30px]",children:[e.jsxs(y,{onSubmit:N,method:"post",action:"",className:"flex items-center gap-[10px] text-white lg:justify-center",children:[e.jsx("input",{className:"p-[10px] bg-[#001822] rounded-[10px] lg:w-[500px] lg:p-[10px]",type:"text",placeholder:"Enter school name",name:"search",defaultValue:o}),e.jsx("button",{className:"bg-white p-[10px] rounded-[50%] border border-black lg:hover:cursor-pointer lg:hover:bg-transparent lg:rounded-[10px] lg:hover:rounded-[50%] lg:hover:transition-all lg:hover:duration-[0.3s] duration-[0.4s]",type:"submit",children:e.jsx("img",{src:"/search.svg",alt:""})}),e.jsxs("div",{className:"hidden lg:flex gap-[10px]",children:[e.jsx("div",{className:"text-black",children:e.jsxs("div",{className:"flex items-center gap-[10px]",children:[e.jsx("div",{className:"bg-white p-[10px] border border-black rounded-[50%] hover:bg-transparent hover:cursor-pointer hover:transition-colors hover:duration-[0.4s] duration-[0.3s]",children:e.jsx("img",{src:"/headset.svg",alt:""})}),e.jsx("p",{children:"Call for support"})]})}),e.jsx("div",{className:"text-black",children:e.jsxs(l,{className:"flex items-center gap-[10px] ",to:"/collection",children:[e.jsx("div",{className:"flex bg-white p-[10px] border border-black rounded-[50%] hover:bg-transparent hover:cursor-pointer hover:transition-colors hover:duration-[0.4s] duration-[0.3s]",children:e.jsx("img",{src:"/package-open.svg",alt:""})}),e.jsx("p",{children:"Your Collection"})]})}),e.jsx("div",{className:"text-black",children:e.jsxs("div",{className:"flex items-center gap-[10px]",children:[e.jsx("div",{className:"bg-white p-[10px] border border-black rounded-[50%] hover:bg-transparent hover:cursor-pointer hover:transition-colors hover:duration-[0.4s] duration-[0.3s]",children:e.jsx("img",{src:"/sun.svg",alt:""})}),e.jsx("p",{children:"Dark/Light Mode"})]})}),e.jsx("div",{className:"text-black",children:e.jsxs(l,{to:"/dashboard",className:"flex items-center gap-[10px]",children:[e.jsx("div",{className:"bg-white p-[10px] border border-black rounded-[50%] hover:bg-transparent hover:cursor-pointer hover:transition-colors hover:duration-[0.4s] duration-[0.3s]",children:e.jsx("img",{src:"/user.svg",alt:""})}),e.jsx("p",{children:"Dashboard"})]})})]})]}),e.jsxs("div",{children:[s.length>0&&o&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 max-w-2xl mx-auto mt-[30px] h-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:s[0].name}),((v=s[0].images)==null?void 0:v.length)>0&&e.jsx("img",{src:s[0].images[0],alt:`${s[0].name} - Cover`,className:"w-full h-64 object-cover rounded mb-4"}),e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",s[0].description||"No description available"]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",s[0].location||"N/A"]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Type:"})," ",s[0].type||"N/A"]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Fee:"})," ",s[0].fee||"N/A"]}),e.jsx("button",{onClick:()=>{w(school)},className:"bg-[#e1eaeb] p-[10px] rounded-[10px] font-light border hover:bg-[#001822] hover:text-white hover:border hover:border-none hover:transition-colors hover:duration-[0.4s] hover:cursor-pointer duration-[0.3s] mt-4",children:"Add to collection"})]}),e.jsx("h2",{className:"text-[30px] text-center mt-[20px]",children:o?`Search results for "${o}"`:"All schools"}),f?e.jsx("p",{className:"text-[30px] text-center items-center h-full",children:"loading..."}):u?e.jsxs("p",{children:["Error : ",u]}):s.length>1||!o?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4",children:s.map(r=>{var a;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:r.name}),((a=r.images)==null?void 0:a[0])&&e.jsx(l,{to:`/finding/${r._id}`,children:e.jsx("img",{src:r.images[0],alt:`${r.name} - Cover`,className:"w-full h-48 object-cover rounded hover:opacity-[0.7] hover:cursor-pointer hover:transition-all hover:duration-[0.4s] hover:scale-[1.009]"})}),e.jsx("p",{className:"mt-2 text-gray-600",children:r.description||"No description available"}),e.jsx("button",{className:"bg-[#e1eaeb] p-[10px] rounded-[10px] font-light border hover:bg-[#001822] hover:text-white hover:border hover:border-none hover:transition-colors hover:duration-[0.4s] hover:cursor-pointer duration-[0.3s]",children:"Add to collection"})]},r._id)})}):null]})]}),e.jsx("div",{className:"flex"})]})});export{D as default};
